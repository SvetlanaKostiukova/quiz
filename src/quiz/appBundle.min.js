var quiz;(function(n){var t;(function(n){var i=function(){function n(n,t,i){this.question=n;this.answers=t.slice(0);this.correctAns=i}return n.prototype.CheckAnswer=function(n){return this.correctAns==n?{isCorrect:!0,comment:this.correctAns}:{isCorrect:!1,comment:this.correctAns}},n.prototype.MixAnswers=function(){for(var n,t=[],i=0;i<this.answers.length;i++){for(n=Math.floor(Math.random()*(this.answers.length+1));t[n];)n=Math.floor(Math.random()*(this.answers.length+1));t[n]=this.answers[i]}this.answers=t.slice(0)},n.prototype.GetQuestion=function(){return{question:this.question,answers:this.answers.slice(0)}},n}(),t;n.Question=i;t=function(){function n(n){this.questionsAmount=0;this.correctAnswers=0;this.answers=[];this.questionsAmount=n}return n.prototype.AddResult=function(n){var t={answer:n.answer,correct:n.result.comment};this.answers[n.idx]==undefined&&(this.answers[n.idx]=t,n.result.isCorrect&&this.correctAnswers++)},n.prototype.GetResult=function(n){return this.answers[n]},n.prototype.GetResults=function(){var n=this.correctAnswers/this.questionsAmount;return n<.33?{title:"В годы показа X-Flies вас, вероятно, похитили инопланетяне",correctAnswers:this.correctAnswers}:n<.66?{title:"Вы кое-что помните... Но истина всегда где-то рядом",correctAnswers:this.correctAnswers}:{title:"Вы отлично помните X-Flies! Приятного просмотра 10- го сезона!",correctAnswers:this.correctAnswers}},n}();n.Result=t})(t=n.quizData||(n.quizData={}))})(quiz||(quiz={})),function(n){var t=function(){function n(n,t,i,r,u,f){this.currentQuestion=-1;this.currentPage=0;var e=this;this.driver=n;this.startView=t;this.questions=i;this.questionView=r;this.results=u;this.resultView=f;this.driver.SetMode("startview");this.driver.SetPages(this.questions.length+2);this.startView.SetOnStartCallback(function(){e.Next()});this.driver.SetOnPrevClick(function(){e.Prev()});this.driver.SetOnNextClick(function(){e.Next()});this.questionView.SetOnSelectedAnswer(function(n){var i=e.questions[e.currentQuestion].CheckAnswer(n),t;e.results.AddResult({idx:e.currentQuestion,answer:n,result:i});t=e.results.GetResult(e.currentQuestion);t&&e.questionView.SetResult(t)})}return n.prototype.GetQuestion=function(){var t=this.questions[this.currentQuestion],n;this.questionView.Set(t.GetQuestion());n=this.results.GetResult(this.currentQuestion);n&&this.questionView.SetResult(n)},n.prototype.Next=function(){this.currentQuestion++;this.currentPage++;this.driver.SetPageNumber(this.currentPage);this.currentQuestion>=this.questions.length?(this.driver.SetMode("resultview"),this.resultView.Set(this.results.GetResults())):(this.driver.SetMode("testview"),this.GetQuestion())},n.prototype.Prev=function(){this.currentQuestion--;this.currentPage--;this.driver.SetPageNumber(this.currentPage);this.currentQuestion<0?this.driver.SetMode("startview"):(this.driver.SetMode("testview"),this.GetQuestion())},n.prototype.MixQuestions=function(){for(var n,t=[],i=0;i<this.questions.length;i++){for(n=Math.floor(Math.random()*(this.questions.length+1));t[n];)n=Math.floor(Math.random()*(this.questions.length+1));t[n]=this.questions[i].MixAnswers()}this.questions=t.slice(0)},n}();n.QuizQuestions=t}(quiz||(quiz={})),function(n){var t;(function(n){var u=function(){function n(n){this.widget=n}return n.prototype.SetOnStartCallback=function(n){this.widget.startview({onstartclick:n})},n}(),t,i,r;n.StartDriver=u;t=function(){function n(n){this.widget=n}return n.prototype.Set=function(n){this.widget.questionview({question:n})},n.prototype.SetResult=function(n){this.widget.questionview({result:n})},n.prototype.SetOnSelectedAnswer=function(n){this.setonselected=n;this.widget.questionview({onselectedanswer:n})},n}();n.QuestionViewDriver=t;i=function(){function n(n){this.widget=n}return n.prototype.Set=function(n){this.widget.resultview({result:n})},n}();n.ResultDriver=i;r=function(){function n(n){this.widget=n}return n.prototype.SetOnNextClick=function(n){this.widget.quizview({onnextclick:n})},n.prototype.SetOnPrevClick=function(n){this.widget.quizview({onprevclick:n})},n.prototype.SetMode=function(n){this.widget.quizview({mode:n})},n.prototype.SetPages=function(n){this.widget.quizview({pages:n})},n.prototype.SetPageNumber=function(n){this.widget.quizview({pageNumber:n})},n}();n.QuizDriver=r})(t=n.uidrivers||(n.uidrivers={}))}(quiz||(quiz={})),function(n){n.widget("quiz.questionview",{options:{question:[],result:undefined},_create:function(){var n=this,t=this.options.question;this.createQuestion()},createQuestion:function(){var r=this,t,u,i,f;if(this.element.empty(),t=this.options.question,t&&t.question&&t.answers&&t.answers.length!=0)for(this.questionDiv=n("<div><\/div>").addClass("question-div").appendTo(this.element),this.question=n("<div>"+t.question+"<\/div>").addClass("question").appendTo(this.questionDiv),this.answersDiv=n("<div><\/div>").addClass("answers").appendTo(this.element),u=n("<ul><\/ul>").appendTo(this.answersDiv),i=0;i<t.answers.length;i++)f=n("<li>"+t.answers[i]+"<\/li>").appendTo(u).click(function(){if(r.options.onselectedanswer!==undefined)r.options.onselectedanswer(n(this).text())})},refresh:function(){var u=this,i=this.options.result,t=n(this.answersDiv).find("li:contains('"+i.answer+"')").eq(0),r=n(this.answersDiv).find("li:contains('"+i.correct+"')").eq(0);t.text()==this.options.result.correct?t.addClass("correct"):(t.addClass("false"),r.addClass("correct"))},_setOption:function(n,t){switch(n){case"question":this.options.question=t;this.createQuestion();break;case"result":this.options.result=t;this.refresh()}this._super(n,t)}})}(jQuery),function(n){n.widget("quiz.resultview",{options:{result:undefined},_create:function(){var n=this;this.createResult()},createResult:function(){if(this.options.result){this.element.empty();var t=n("<div><\/div>").appendTo(this.element),i=n("<h1>Помните ли вы те, прежние «Секретные материалы»?<h1>").appendTo(t),r=n("<h3>Правильные ответы: "+this.options.result.correctAnswers+"/10<\/h3>").appendTo(t),u=n("<h3>"+this.options.result.title+"<\/h3>").appendTo(t)}},_setOption:function(n,t){switch(n){case"result":t&&(this.options.result=t,this.createResult())}}})}(jQuery),function(n){n.widget("quiz.startview",{options:{onstartclick:undefined},_create:function(){var i=this;this.element.empty();var t=n("<div><\/div>").addClass("start").appendTo(this.element),f=n("<h1>Помните ли вы те, прежние «Секретные материалы»?<h1>").appendTo(t),e=n("<h3>Тест на знание культового телесериала <h3>").appendTo(t),r=n("<div><\/div>").addClass("start-button").appendTo(t).click(function(){i.options.onstartclick!==undefined&&i.options.onstartclick()}),u=n("<div><div>").addClass("outter-icon").appendTo(r),o=n("<div><\/div>").addClass("inner-icon").appendTo(u),s=n("<div>Начать<div>").addClass("start-text").appendTo(r)}})}(jQuery),function(n){n.widget("quiz.quizview",{options:{mode:"startview",pageNumber:0,pages:1},_create:function(){var t=this,i,r;this.element.empty();this.content=n("<div><\/div>").appendTo(this.element);this.startContent=n("<div><\/div>").appendTo(this.content);this.options.startview&&(n(this.startContent).replaceWith(this.options.startview),this.startContent=this.options.startview);this.testContent=n("<div><\/div>").appendTo(this.content).hide();this.pageNumbers=n("<div><\/div>").addClass("page-numbers").appendTo(this.content).hide();this.prevBttn=n("<div><\/div>").addClass("prev-bttn").appendTo(this.pageNumbers).click(function(){t.options.onprevclick!==undefined&&t.options.onprevclick()});i=n("<div><<\/div>").appendTo(this.prevBttn);r=n("<div>Назад<\/div>").appendTo(this.prevBttn);this.progress=n("<div><\/div>").addClass("page").appendTo(this.pageNumbers);this.number=n("<p>"+this.options.pageNumber+"<\/p>").appendTo(this.progress);this.slash=n("<p>/<\/p>").appendTo(this.progress);this.maxPageNumber=n("<p>"+(this.options.pages-2)+"<\/p>").appendTo(this.progress);this.nextBttn=n("<div><\/div>").addClass("next-bttn").appendTo(this.pageNumbers).click(function(){t.options.onnextclick!==undefined&&t.options.onnextclick()});var u=n("<div>Дальше<\/div>").appendTo(this.nextBttn),f=n("<div>><\/div>").appendTo(this.nextBttn),e=n("<div><\/div>").addClass("clearfix").appendTo(this.content);this.indicators=n("<div><\/div>").addClass("indicators").appendTo(this.element);this.refresh()},refresh:function(){var t,i,r,f,u;for(this.indicators.empty(),t=n("<ul><\/ul>").appendTo(this.indicators),i=0;i<this.options.pages;i++)r=n("<li><\/li>").addClass("indicator").appendTo(t),f=n("<div><\/div>").addClass("circle-indicator").appendTo(r);this.nextBttn.show();this.prevBttn.show();this.options.pageNumber>=this.options.pages&&(this.options.pageNumber=this.options.pages-1,this.nextBttn.hide());this.options.pageNumber==this.options.pages-1&&this.nextBttn.hide();this.options.pageNumber<0&&(this.options.pageNumber=0);this.options.pageNumber<1&&this.prevBttn.hide();n(this.number).text(this.options.pageNumber);u=n(t).find("li:lt("+(this.options.pageNumber+1)+")");u.children().addClass("completed")},changeMode:function(){switch(this.options.mode){case"startview":this.content.removeClass("quiz-div");this.testContent.hide();this.pageNumbers.hide();this.startContent.show();break;case"testview":this.options.testview&&(this.content.addClass("quiz-div"),this.startContent.hide(),this.testContent.show(),n(this.testContent).replaceWith(this.options.testview),this.testContent=this.options.testview,this.pageNumbers.show(),this.progress.show());break;case"resultview":this.options.resultview&&(this.content.addClass("quiz-div"),this.options.pageNumber=this.options.pages,this.startContent.hide(),this.testContent.show(),n(this.testContent).replaceWith(this.options.resultview),this.testContent=this.options.resultview,this.pageNumbers.show(),this.progress.hide())}},_setOption:function(t,i){switch(t){case"starview":this.options.startview=i;i&&(n(this.startContent).replaceWith(i),this.startContent=this.options.startview);break;case"testview":this.options.testview=i;break;case"resultview":this.options.resultview=i;break;case"mode":this.options.mode=i;this.changeMode();break;case"pages":i<1&&(i=1);this.options.pages=i;this.refresh();break;case"pageNumber":(i<0||i>=this.options.pages)&&(i=0);this.options.pageNumber=i;this.refresh()}this._super(t,i)}})}(jQuery);
//# sourceMappingURL=appBundle.min.js.map
